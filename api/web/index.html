<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBA Stables - Live NBA Scores, Stats & Player Tracker</title>
    <meta name="description" content="Free live NBA scores, box scores, standings, injury reports and player tracking. Real-time stats with a clean, modern interface. No ads, no tracking.">
    <meta name="keywords" content="NBA, basketball, live scores, NBA stats, player tracker, box scores, standings, injury report, NBA API">
    <meta name="author" content="NBA Stables">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://nba-stables.onrender.com/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://nba-stables.onrender.com/">
    <meta property="og:title" content="NBA Stables - Live NBA Scores & Stats">
    <meta property="og:description" content="Free live NBA scores, box scores, standings, injury reports and player tracking. Real-time stats with no ads.">
    <meta property="og:image" content="https://nba-stables.onrender.com/static/og-image.png">
    <meta property="og:site_name" content="NBA Stables">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://nba-stables.onrender.com/">
    <meta name="twitter:title" content="NBA Stables - Live NBA Scores & Stats">
    <meta name="twitter:description" content="Free live NBA scores, box scores, standings, injury reports and player tracking. Real-time stats with no ads.">
    <meta name="twitter:image" content="https://nba-stables.onrender.com/static/og-image.png">

    <!-- PWA -->
    <meta name="theme-color" content="#ff6b35">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="/api/web/web/manifest.json">
    <link rel="apple-touch-icon" href="/api/web/web/icon-192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/api/web/web/icon-192.png">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "NBA Stables",
      "description": "Free live NBA scores, box scores, standings, injury reports and player tracking",
      "url": "https://nba-stables.onrender.com/",
      "applicationCategory": "SportsApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "Live NBA Scores",
        "Box Scores",
        "Player Tracker",
        "Standings",
        "Injury Reports",
        "Desktop Widgets",
        "Android Widget"
      ]
    }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-card: #1a1a24;
            --bg-hover: #22222e;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --accent: #ff6b35;
            --accent-light: #ff8c5a;
            --success: #4ade80;
            --border: #2a2a3a;
            --gradient-1: linear-gradient(135deg, #ff6b35 0%, #ff8c5a 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Navigation */
        nav {
            background: var(--bg-secondary);
            padding: 15px 0;
            border-bottom: 1px solid var(--border);
        }

        .nav-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 5px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .nav-tabs::-webkit-scrollbar {
            display: none;
        }

        .nav-tab {
            padding: 10px 20px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .nav-tab:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .nav-tab.active {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        /* Main Content */
        main {
            padding: 30px 0;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title .badge {
            background: var(--accent);
            color: white;
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 500;
        }

        /* Cards */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 20px;
        }

        /* Compact grid for scoreboard */
        .cards-grid-compact {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 12px;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        /* Game Card - Compact */
        .game-card {
            padding: 12px;
        }

        .game-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .game-local-time {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .game-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .game-status.live {
            background: #ef4444;
            color: white;
            animation: pulse 2s infinite;
            will-change: opacity;
        }

        .game-status.final {
            background: var(--bg-hover);
            color: var(--text-secondary);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .teams-container {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .team-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px;
            background: var(--bg-secondary);
            border-radius: 6px;
        }

        .team-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .team-tricode {
            font-size: 0.75rem;
            color: var(--text-secondary);
            background: var(--bg-hover);
            padding: 2px 6px;
            border-radius: 4px;
            min-width: 32px;
            text-align: center;
        }

        .team-name {
            font-weight: 600;
            font-size: 0.85rem;
        }

        .team-score {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--accent);
            min-width: 36px;
            text-align: right;
        }

        .leader-section {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--border);
        }

        .leader-title {
            font-size: 0.65rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 6px;
        }

        .leader-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 0;
        }

        .leader-name {
            font-weight: 500;
            font-size: 0.8rem;
            color: var(--text-primary);
        }

        .leader-stats {
            display: flex;
            gap: 10px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--accent);
        }

        .stat-label {
            font-size: 0.6rem;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        /* Box Score */
        .boxscore-card {
            overflow-x: auto;
        }

        .boxscore-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.82rem;
        }

        .boxscore-table th,
        .boxscore-table td {
            padding: 4px 6px;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }

        .boxscore-table th {
            background: var(--bg-secondary);
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 0.72rem;
            text-transform: uppercase;
        }

        .boxscore-table td:first-child {
            text-align: left;
            font-weight: 600;
        }

        .boxscore-table tr:hover td {
            background: var(--bg-hover);
        }

        .highlight {
            color: var(--success);
            font-weight: 600;
        }

        .stat-elite {
            color: #f59e0b;
            font-weight: 700;
        }

        .stat-great {
            color: #4ade80;
            font-weight: 600;
        }

        .stat-good {
            color: #38bdf8;
            font-weight: 500;
        }

        /* Leaders Section */
        .leaders-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .leader-card {
            padding: 20px;
        }

        .leader-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .leader-category {
            font-weight: 600;
            font-size: 1rem;
        }

        .leader-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
        }

        .leader-players {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .leader-player {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .leader-player-name {
            font-weight: 500;
        }

        .leader-player-team {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* Player Tracker */
        .player-search {
            margin-bottom: 30px;
        }

        .search-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .search-input-wrapper {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 15px 20px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .search-input::placeholder {
            color: var(--text-secondary);
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            margin-top: 5px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 50;
            display: none;
        }

        .search-results.show {
            display: block;
        }

        .search-result-item {
            padding: 12px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid var(--border);
        }

        .search-result-item:hover,
        .search-result-item.active {
            background: var(--bg-hover);
        }

        .search-result-item.active {
            border-left: 2px solid var(--accent);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .tracked-players {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .player-chip {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: var(--bg-card);
            border: 1px solid var(--accent);
            border-radius: 20px;
            font-size: 0.9rem;
            width: fit-content;
        }

        .player-chip-remove {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1.2rem;
            line-height: 1;
        }

        .player-chip-remove:hover {
            color: #ef4444;
        }

        .btn {
            padding: 15px 30px;
            background: var(--gradient-1);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .player-stats-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.92rem;
        }

        .player-stats-table th,
        .player-stats-table td {
            padding: 4px 8px;
            text-align: center;
            border: 1px solid #2a3a4a;
        }

        .player-stats-table th {
            background: #1a2a3a;
            color: #8aaccc;
            font-weight: 600;
            font-size: 0.78rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .player-stats-table tbody tr:nth-child(even) td {
            background: #13131c;
        }

        .player-stats-table td:first-child,
        .player-stats-table th:first-child {
            text-align: left;
            white-space: nowrap;
            width: 1%;
            padding-left: 10px;
        }

        .player-stats-table tbody tr:hover td {
            background: #1e2e40 !important;
        }

        /* Loading State */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 60px;
            color: var(--text-secondary);
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .empty-state-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        /* Refresh Button */
        .refresh-btn {
            background: var(--bg-hover);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            padding: 8px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
        }

        .refresh-btn:hover {
            background: var(--bg-card);
        }

        /* Date Selector */
        .date-selector {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 20px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            padding-bottom: 5px;
        }

        .date-selector::-webkit-scrollbar {
            display: none;
        }

        .date-btn {
            padding: 8px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.85rem;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .date-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .date-btn.active {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 0 12px;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .leaders-grid {
                grid-template-columns: 1fr;
            }

            .header-content {
                flex-direction: column;
                gap: 8px;
            }

            header {
                padding: 12px 0;
            }

            nav {
                padding: 10px 0;
                position: sticky;
                top: 58px;
                z-index: 99;
            }

            .nav-tab {
                padding: 8px 14px;
                font-size: 0.8rem;
                flex-shrink: 0;
            }

            .section-title {
                font-size: 1.2rem;
                flex-wrap: wrap;
            }

            main {
                padding: 16px 0;
            }

            .search-container {
                flex-direction: column;
            }

            .search-input-wrapper {
                min-width: 100%;
            }

            .search-input {
                padding: 12px 16px;
            }

            .btn {
                padding: 12px 20px;
                width: 100%;
            }

            .boxscore-table th,
            .boxscore-table td {
                padding: 3px 4px;
                font-size: 0.72rem;
            }

            .player-stats-table th,
            .player-stats-table td {
                padding: 3px 5px;
                font-size: 0.77rem;
            }

            .date-btn {
                padding: 6px 12px;
                font-size: 0.8rem;
            }

            .loading {
                padding: 30px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">&#127936;</div>
                    <h1>NBA Stables</h1>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <div class="nav-tabs">
                <button class="nav-tab active" data-section="scoreboard">Live Scoreboard</button>
                <button class="nav-tab" data-section="boxscores">Box Scores</button>
                <button class="nav-tab" data-section="leaders">Daily Leaders</button>
                <button class="nav-tab" data-section="tracker">Player Tracker</button>
                <button class="nav-tab" data-section="standings">Standings</button>
                <button class="nav-tab" data-section="injuries">Injuries</button>
                <button class="nav-tab" data-section="lastngames">Last N Games</button>
                <button class="nav-tab" data-section="playoffs">Playoffs</button>
                <button class="nav-tab" data-section="download">App</button>
                <a href="/about" class="nav-tab" style="text-decoration: none;">About</a>
            </div>
        </div>
    </nav>

    <main>
        <div class="container">
            <!-- Scoreboard Section -->
            <section id="scoreboard" class="section active">
                <div class="section-title">
                    Live Scoreboard
                    <span class="badge" id="gamesCount">0 Games</span>
                    <button class="refresh-btn" onclick="loadScoreboard()">&#8635; Refresh</button>
                </div>
                <div id="scoreboardContent" class="cards-grid-compact">
                    <div class="loading"><div class="spinner"></div> Loading games...</div>
                </div>
            </section>

            <!-- Box Scores Section -->
            <section id="boxscores" class="section">
                <div class="section-title">
                    Box Scores
                    <button class="refresh-btn" onclick="loadBoxscores()">&#8635; Refresh</button>
                </div>
                <div class="date-selector">
                    <button class="date-btn active" data-offset="0">Today</button>
                    <button class="date-btn" data-offset="1">-1d</button>
                    <button class="date-btn" data-offset="2">-2d</button>
                    <button class="date-btn" data-offset="3">-3d</button>
                    <button class="date-btn" data-offset="4">-4d</button>
                    <button class="date-btn" data-offset="5">-5d</button>
                    <button class="date-btn" data-offset="6">-6d</button>
                    <button class="date-btn" data-offset="7">-7d</button>
                </div>
                <div id="boxscoresContent">
                    <div class="loading"><div class="spinner"></div> Loading box scores...</div>
                </div>
            </section>

            <!-- Leaders Section -->
            <section id="leaders" class="section">
                <div class="section-title">
                    Daily Leaders
                    <button class="refresh-btn" onclick="loadLeaders()">&#8635; Refresh</button>
                </div>
                <div class="date-selector" id="leadersDateSelector">
                    <button class="date-btn active" data-offset="0">Today</button>
                    <button class="date-btn" data-offset="1">-1d</button>
                    <button class="date-btn" data-offset="2">-2d</button>
                    <button class="date-btn" data-offset="3">-3d</button>
                    <button class="date-btn" data-offset="4">-4d</button>
                    <button class="date-btn" data-offset="5">-5d</button>
                    <button class="date-btn" data-offset="6">-6d</button>
                    <button class="date-btn" data-offset="7">-7d</button>
                </div>
                <div id="leadersContent" class="leaders-grid">
                    <div class="loading"><div class="spinner"></div> Loading leaders...</div>
                </div>
            </section>

            <!-- Player Tracker Section -->
            <section id="tracker" class="section">
                <div class="section-title">Player Tracker</div>
                <div class="player-search">
                    <div class="search-container">
                        <div class="search-input-wrapper">
                            <input type="text" class="search-input" id="playerSearch" placeholder="Search for a player..." autocomplete="off">
                            <div class="search-results" id="searchResults"></div>
                        </div>
                        <button class="btn" id="trackBtn" onclick="loadTrackedStats()" disabled>Get Live Stats</button>
                    </div>
                    <div class="tracked-players" id="trackedPlayers"></div>
                </div>
                <div id="trackerContent">
                    <div class="empty-state">
                        <div class="empty-state-icon">&#127942;</div>
                        <div class="empty-state-title">Track Your Favorite Players</div>
                        <p>Search and select players above to see their live game stats</p>
                    </div>
                </div>
            </section>

            <!-- Standings Section -->
            <section id="standings" class="section">
                <div class="section-title">
                    NBA Standings
                    <button class="refresh-btn" onclick="loadStandings()">&#8635; Refresh</button>
                </div>
                <div id="standingsContent" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(min(500px, 100%), 1fr)); gap: 20px;">
                    <div class="loading"><div class="spinner"></div> Loading standings...</div>
                </div>
            </section>

            <!-- Injuries Section -->
            <section id="injuries" class="section">
                <div class="section-title">
                    Injury Report
                    <span class="badge" id="injuriesSourceBadge" style="background: #ef4444;">CBS</span>
                    <button class="refresh-btn" onclick="loadInjuries()">&#8635; Refresh</button>
                </div>
                <div style="margin-bottom: 20px; display: flex; gap: 20px; flex-wrap: wrap;">
                    <div>
                        <button class="date-btn active" id="injuriesListBtn" onclick="setInjuriesView('list')">All Players</button>
                        <button class="date-btn" id="injuriesGroupBtn" onclick="setInjuriesView('grouped')">Group by Team</button>
                    </div>
                </div>
                <div id="injuriesContent">
                    <div class="loading"><div class="spinner"></div> Loading injury report...</div>
                </div>
            </section>

            <!-- Last N Games Section -->
            <section id="lastngames" class="section">
                <div class="section-title">Last N Games</div>
                <div class="player-search">
                    <div class="search-container">
                        <div class="search-input-wrapper">
                            <input type="text" class="search-input" id="lastNSearch" placeholder="Search for a player..." autocomplete="off">
                            <div class="search-results" id="lastNSearchResults"></div>
                        </div>
                        <button class="btn" id="lastNBtn" onclick="loadLastNGames()" disabled>Get Stats</button>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center; margin-top: 12px;">
                        <span style="color: var(--text-secondary); font-size: 0.85rem; white-space: nowrap;">Last:</span>
                        <button class="date-btn active" data-n="5" style="padding: 8px 10px; min-width: unset;">5</button>
                        <button class="date-btn" data-n="10" style="padding: 8px 10px; min-width: unset;">10</button>
                        <button class="date-btn" data-n="15" style="padding: 8px 10px; min-width: unset;">15</button>
                    </div>
                    <div id="lastNPlayerChip" style="margin-top: 10px;"></div>
                </div>
                <div id="lastNContent">
                    <div class="empty-state">
                        <div class="empty-state-icon">&#128202;</div>
                        <div class="empty-state-title">Last N Games Stats</div>
                        <p>Search for a player to view their recent game log</p>
                    </div>
                </div>
            </section>

            <!-- Playoffs Section -->
            <section id="playoffs" class="section">
                <div class="section-title">
                    Playoff Bracket
                    <button class="refresh-btn" onclick="loadPlayoffs()">&#8635; Refresh</button>
                </div>
                <div style="display:flex; gap:8px; margin-bottom:20px;">
                    <button id="playoffEastBtn" class="nav-tab active" onclick="showConference('east')">Eastern Conference</button>
                    <button id="playoffWestBtn" class="nav-tab" onclick="showConference('west')">Western Conference</button>
                </div>
                <div id="playoffsContent">
                    <div class="loading"><div class="spinner"></div> Loading bracket...</div>
                </div>
            </section>

            <!-- App Section -->
            <section id="download" class="section">
                <div class="section-title">NBA Stables App</div>
                <div class="card" style="padding: 30px; max-width: 500px;">
                    <div style="text-align: center;">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #ff6b35, #ff8c5a); border-radius: 20px; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 40px;">&#127936;</div>
                        <h2 style="margin-bottom: 10px;">Coming Soon</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 20px;">We're building a native Android app with a home screen widget for live NBA scores.</p>
                        <ul style="color: var(--text-secondary); text-align: left; padding-left: 20px; line-height: 2; margin-bottom: 20px;">
                            <li>Live scores widget on your home screen</li>
                            <li>Auto-updates during games</li>
                            <li>Dark theme, minimal design</li>
                            <li>No ads, no tracking</li>
                        </ul>
                        <p style="color: var(--text-secondary); font-size: 0.85rem;">In the meantime, you can install this site as a PWA — tap your browser's "Add to Home Screen" option.</p>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <script>const API_BASE="";let trackedPlayerIds=[],currentBoxscoreOffset=0,currentLeadersOffset=0;const _abortControllers={};function _fetchWithAbort(t,e,s={},a=15e3){_abortControllers[t]&&_abortControllers[t].abort();const n=new AbortController;_abortControllers[t]=n;const i=setTimeout(()=>n.abort(),a);return fetch(e,{...s,signal:n.signal}).finally(()=>clearTimeout(i))}const TEAM_TZ={ATL:"America/New_York",BOS:"America/New_York",BKN:"America/New_York",CHA:"America/New_York",CHI:"America/Chicago",CLE:"America/New_York",DAL:"America/Chicago",DEN:"America/Denver",DET:"America/Detroit",GSW:"America/Los_Angeles",HOU:"America/Chicago",IND:"America/Indiana/Indianapolis",LAC:"America/Los_Angeles",LAL:"America/Los_Angeles",MEM:"America/Chicago",MIA:"America/New_York",MIL:"America/Chicago",MIN:"America/Chicago",NOP:"America/Chicago",NYK:"America/New_York",OKC:"America/Chicago",ORL:"America/New_York",PHI:"America/New_York",PHX:"America/Phoenix",POR:"America/Los_Angeles",SAC:"America/Los_Angeles",SAS:"America/Chicago",TOR:"America/Toronto",UTA:"America/Denver",WAS:"America/New_York"};function homeTeamLocalTime(t){const e=TEAM_TZ[t];return e?(new Date).toLocaleTimeString("en-US",{timeZone:e,hour:"2-digit",minute:"2-digit"}):""}function isGameLive(t){return/^(Q[1-4]|OT|Halftime|End of)/i.test(t.trim())}const STAT_TIERS={points:[30,20,15],rebounds:[15,10,7],assists:[15,10,7],steals:[4,3,2],blocks:[4,3,2]};function statClass(t,e){const s=STAT_TIERS[t];return!s||e<=0?"":e>=s[0]?"stat-elite":e>=s[1]?"stat-great":e>=s[2]?"stat-good":""}function _dateLabel(t){const e=new Date;return e.setDate(e.getDate()-t),e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function _loadDateLabels(){fetch("/api/dates").then(t=>t.json()).then(t=>{const e=t=>{const e=new Date(t);return isNaN(e)?t:e.toLocaleDateString("en-US",{month:"short",day:"numeric"})};_boxscoreDateBtns.forEach(s=>{const a=t.dates[parseInt(s.dataset.offset)];a&&(s.textContent=e(a))}),_leaderDateBtns.forEach(s=>{const a=t.dates[parseInt(s.dataset.offset)];a&&(s.textContent=e(a))})}).catch(()=>{})}const _TEAM_CODES={hawks:"ATL",celtics:"BOS",nets:"BKN",hornets:"CHA",bulls:"CHI",cavaliers:"CLE",mavericks:"DAL",nuggets:"DEN",pistons:"DET",warriors:"GSW",rockets:"HOU",pacers:"IND",clippers:"LAC",lakers:"LAL",grizzlies:"MEM",heat:"MIA",bucks:"MIL",timberwolves:"MIN",pelicans:"NOP",knicks:"NYK",thunder:"OKC",magic:"ORL","76ers":"PHI",suns:"PHX","trail blazers":"POR",kings:"SAC",spurs:"SAS",raptors:"TOR",jazz:"UTA",wizards:"WAS",atlanta:"ATL",boston:"BOS",brooklyn:"BKN",charlotte:"CHA",chicago:"CHI",cleveland:"CLE",dallas:"DAL",denver:"DEN",detroit:"DET","golden st.":"GSW",houston:"HOU",indiana:"IND","l.a. clippers":"LAC","l.a. lakers":"LAL",memphis:"MEM",miami:"MIA",milwaukee:"MIL",minnesota:"MIN","new orleans":"NOP","new york":"NYK","oklahoma city":"OKC",orlando:"ORL",philadelphia:"PHI",phoenix:"PHX",portland:"POR",sacramento:"SAC","san antonio":"SAS",toronto:"TOR",utah:"UTA",washington:"WAS"},_RETURN_DATE_RE=/Jan \d+|Feb \d+|Mar \d+|Apr \d+|May \d+/i,_navTabs=Array.from(document.querySelectorAll(".nav-tab[data-section]")),_sections=Array.from(document.querySelectorAll(".section"));document.querySelectorAll(".nav-tab").forEach(t=>{t.addEventListener("click",()=>{if(t.dataset.section)switch(_navTabs.forEach(t=>t.classList.remove("active")),_sections.forEach(t=>t.classList.remove("active")),t.classList.add("active"),document.getElementById(t.dataset.section).classList.add("active"),t.dataset.section){case"scoreboard":loadScoreboard();break;case"boxscores":loadBoxscores();break;case"leaders":loadLeaders();break;case"standings":loadStandings();break;case"injuries":loadInjuries();break;case"playoffs":loadPlayoffs()}})});const _boxscoreDateBtns=Array.from(document.querySelectorAll("#boxscores .date-btn"));_boxscoreDateBtns.forEach(t=>{t.textContent=_dateLabel(parseInt(t.dataset.offset)),t.addEventListener("click",()=>{_boxscoreDateBtns.forEach(t=>t.classList.remove("active")),t.classList.add("active"),currentBoxscoreOffset=parseInt(t.dataset.offset),loadBoxscores()})});const _leaderDateBtns=Array.from(document.querySelectorAll("#leadersDateSelector .date-btn"));async function loadScoreboard(){const t=document.getElementById("scoreboardContent");t.innerHTML='<div class="loading"><div class="spinner"></div> Loading games...</div>';try{const e=await _fetchWithAbort("scoreboard","/api/scoreboard"),s=await e.json();if(document.getElementById("gamesCount").textContent=`${s.games.length} Games`,0===s.games.length)return void(t.innerHTML='\n                        <div class="empty-state">\n                            <div class="empty-state-icon">&#127944;</div>\n                            <div class="empty-state-title">No Games Today</div>\n                            <p>Check back later for live games</p>\n                        </div>\n                    ');const a=t=>null==t||"null"===t?"-":t,n=t=>t&&t.name&&"null"!==t.name;t.innerHTML=s.games.map(t=>`\n                    <div class="card game-card">\n                        <div class="game-card-header">\n                            <span class="game-status ${t.status.toLowerCase().includes("final")?"final":"live"}">${t.status}</span>\n                            ${isGameLive(t.status)?`<span class="game-local-time">${homeTeamLocalTime(t.homeTeam.tricode)}</span>`:""}\n                        </div>\n                        <div class="teams-container">\n                            <div class="team-row">\n                                <div class="team-info">\n                                    <span class="team-tricode">${t.homeTeam.tricode}</span>\n                                    <span class="team-name">${t.homeTeam.name}</span>\n                                </div>\n                                <span class="team-score">${a(t.homeTeam.score)}</span>\n                            </div>\n                            <div class="team-row">\n                                <div class="team-info">\n                                    <span class="team-tricode">${t.awayTeam.tricode}</span>\n                                    <span class="team-name">${t.awayTeam.name}</span>\n                                </div>\n                                <span class="team-score">${a(t.awayTeam.score)}</span>\n                            </div>\n                        </div>\n                        ${n(t.homeTeam.leader)||n(t.awayTeam.leader)?`\n                        <div class="leader-section">\n                            <div class="leader-title">Top Performers</div>\n                            ${n(t.homeTeam.leader)?`\n                            <div class="leader-row">\n                                <span class="leader-name">${t.homeTeam.leader.name}</span>\n                                <div class="leader-stats">\n                                    <div class="stat"><div class="stat-value">${a(t.homeTeam.leader.points)}</div><div class="stat-label">PTS</div></div>\n                                    <div class="stat"><div class="stat-value">${a(t.homeTeam.leader.rebounds)}</div><div class="stat-label">REB</div></div>\n                                    <div class="stat"><div class="stat-value">${a(t.homeTeam.leader.assists)}</div><div class="stat-label">AST</div></div>\n                                </div>\n                            </div>`:""}\n                            ${n(t.awayTeam.leader)?`\n                            <div class="leader-row">\n                                <span class="leader-name">${t.awayTeam.leader.name}</span>\n                                <div class="leader-stats">\n                                    <div class="stat"><div class="stat-value">${a(t.awayTeam.leader.points)}</div><div class="stat-label">PTS</div></div>\n                                    <div class="stat"><div class="stat-value">${a(t.awayTeam.leader.rebounds)}</div><div class="stat-label">REB</div></div>\n                                    <div class="stat"><div class="stat-value">${a(t.awayTeam.leader.assists)}</div><div class="stat-label">AST</div></div>\n                                </div>\n                            </div>`:""}\n                        </div>`:""}\n                    </div>\n                `).join("")}catch(e){t.innerHTML=`\n                    <div class="empty-state">\n                        <div class="empty-state-icon">&#9888;</div>\n                        <div class="empty-state-title">Error Loading Games</div>\n                        <p>${e.message}</p>\n                    </div>\n                `}}async function loadBoxscores(){const t=document.getElementById("boxscoresContent");t.innerHTML='<div class="loading"><div class="spinner"></div> Loading box scores...</div>';try{const e=await _fetchWithAbort("boxscores",`/api/boxscores?days_offset=${currentBoxscoreOffset}`),s=await e.json();if(0===s.boxscores.length)return void(t.innerHTML=`\n                        <div class="empty-state">\n                            <div class="empty-state-icon">&#128202;</div>\n                            <div class="empty-state-title">No Box Scores Available</div>\n                            <p>No completed games for ${s.date}</p>\n                        </div>\n                    `);const a=window.innerWidth<=768;t.innerHTML=s.boxscores.map(t=>a?`\n                    <div class="card boxscore-card" style="margin-bottom: 16px; cursor: pointer;" onclick="toggleGameDetails('${t.gameId}', this)">\n                        ${t.teams.map(e=>`\n                        <div style="padding: 12px; ${0===t.teams.indexOf(e)?"border-bottom: 1px solid var(--border);":""}">\n                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">\n                                <span style="font-weight: 600; font-size: 0.95rem;">${e.name}</span>\n                                <span style="font-size: 1.3rem; font-weight: 700; color: var(--accent);">${e.score}</span>\n                            </div>\n                            <div style="display: flex; gap: 8px; flex-wrap: wrap; font-size: 0.7rem; color: var(--text-secondary);">\n                                <span>FG ${(100*e.stats.fgPct).toFixed(0)}%</span>\n                                <span>3P ${(100*e.stats.threePtPct).toFixed(0)}%</span>\n                                <span>FT ${(100*e.stats.ftPct).toFixed(0)}%</span>\n                                <span>REB ${e.stats.rebounds}</span>\n                                <span>AST ${e.stats.assists}</span>\n                                <span>TO ${e.stats.turnovers}</span>\n                            </div>\n                            <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 6px;">\n                                ${e.leader.name} <span style="color: var(--accent);">${e.leader.points}/${e.leader.rebounds}/${e.leader.assists}</span>\n                            </div>\n                        </div>\n                        `).join("")}\n                        <div style="text-align: center; padding: 8px; color: var(--text-secondary); font-size: 0.75rem; border-top: 1px solid var(--border);">\n                            Tap for player details ▼\n                        </div>\n                        <div class="game-details" id="details-${t.gameId}" style="display: none;"></div>\n                    </div>`:`\n                    <div class="card boxscore-card" style="margin-bottom: 20px; cursor: pointer;" onclick="toggleGameDetails('${t.gameId}', this)">\n                        <table class="boxscore-table">\n                            <thead>\n                                <tr>\n                                    <th>Team</th>\n                                    <th>Score</th>\n                                    <th>FG</th>\n                                    <th>FG%</th>\n                                    <th>3PT</th>\n                                    <th>3P%</th>\n                                    <th>FT</th>\n                                    <th>FT%</th>\n                                    <th>REB</th>\n                                    <th>AST</th>\n                                    <th>STL</th>\n                                    <th>BLK</th>\n                                    <th>TO</th>\n                                    <th>Leader  |PTS|REB|AST|</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                ${t.teams.map(t=>`\n                                    <tr>\n                                        <td>${t.name}</td>\n                                        <td class="highlight">${t.score}</td>\n                                        <td>${t.stats.fg}</td>\n                                        <td>${(100*t.stats.fgPct).toFixed(1)}%</td>\n                                        <td>${t.stats.threePt}</td>\n                                        <td>${(100*t.stats.threePtPct).toFixed(1)}%</td>\n                                        <td>${t.stats.ft}</td>\n                                        <td>${(100*t.stats.ftPct).toFixed(1)}%</td>\n                                        <td>${t.stats.rebounds}</td>\n                                        <td>${t.stats.assists}</td>\n                                        <td>${t.stats.steals}</td>\n                                        <td>${t.stats.blocks}</td>\n                                        <td>${t.stats.turnovers}</td>\n                                        <td>${t.leader.name}  |${t.leader.points}|${t.leader.rebounds}|${t.leader.assists}|</td>\n                                    </tr>\n                                `).join("")}\n                            </tbody>\n                        </table>\n                        <div style="text-align: center; padding: 8px; color: var(--text-secondary); font-size: 0.8rem;">\n                            Click to see player details ▼\n                        </div>\n                        <div class="game-details" id="details-${t.gameId}" style="display: none;"></div>\n                    </div>`).join("")}catch(e){t.innerHTML=`\n                    <div class="empty-state">\n                        <div class="empty-state-icon">&#9888;</div>\n                        <div class="empty-state-title">Error Loading Box Scores</div>\n                        <p>${e.message}</p>\n                    </div>\n                `}}async function loadLeaders(){const t=document.getElementById("leadersContent");t.innerHTML='<div class="loading"><div class="spinner"></div> Loading leaders...</div>';try{const e=await _fetchWithAbort("leaders",`/api/leaders?days_offset=${currentLeadersOffset}`),s=await e.json(),a=Object.values(s.leaders);if(0===a.length)return void(t.innerHTML=`\n                        <div class="empty-state">\n                            <div class="empty-state-icon">&#127942;</div>\n                            <div class="empty-state-title">No Stats Available</div>\n                            <p>No completed games for ${s.date}</p>\n                        </div>\n                    `);t.innerHTML=a.map(t=>`\n                    <div class="card leader-card">\n                        <div class="leader-card-header">\n                            <span class="leader-category">${t.label}</span>\n                            <span class="leader-value">${t.value}</span>\n                        </div>\n                        <div class="leader-players">\n                            ${t.players.map(t=>`\n                                <div class="leader-player">\n                                    <span class="leader-player-name">${t.name}</span>\n                                    <span class="leader-player-team">${t.team}</span>\n                                </div>\n                            `).join("")}\n                        </div>\n                    </div>\n                `).join("")}catch(e){t.innerHTML=`\n                    <div class="empty-state">\n                        <div class="empty-state-icon">&#9888;</div>\n                        <div class="empty-state-title">Error Loading Leaders</div>\n                        <p>${e.message}</p>\n                    </div>\n                `}}function initPlayerSearch(t,e,s,a){const n=document.getElementById(t),i=document.getElementById(e);let l,r=-1;function o(){return Array.from(i.querySelectorAll(".search-result-item[data-id]"))}function d(t){t&&t.dataset.id&&(s(parseInt(t.dataset.id),t.dataset.name),n.value="",i.classList.remove("show"),r=-1)}n.addEventListener("keydown",t=>{const e=i.classList.contains("show");if("ArrowDown"===t.key||"ArrowUp"===t.key){if(t.preventDefault(),!e)return;const s=o();!function(t,e){e.forEach(t=>t.classList.remove("active")),r=t<0||t>=e.length?-1:t,r>=0&&(e[r].classList.add("active"),e[r].scrollIntoView({block:"nearest"}))}("ArrowDown"===t.key?Math.min(r+1,s.length-1):Math.max(r-1,0),s)}else if("Enter"===t.key){if(t.preventDefault(),e){const t=o();d(r>=0?t[r]:t[0])}else if(a){const t=document.getElementById(a);t&&!t.disabled&&t.click()}}else"Escape"===t.key&&(i.classList.remove("show"),r=-1)}),n.addEventListener("input",()=>{r=-1,clearTimeout(l);const e=n.value.trim();e.length<2?i.classList.remove("show"):l=setTimeout(async()=>{try{const s=await _fetchWithAbort("search_"+t,`/api/players/search?q=${encodeURIComponent(e)}`);if(!s.ok)throw new Error("Search failed");const a=await s.json();i.innerHTML=0===a.players.length?'<div class="search-result-item">No players found</div>':a.players.map(t=>`\n                                <div class="search-result-item" data-id="${t.id}" data-name="${t.name}">\n                                    <span>${t.name}</span>\n                                    <span style="color: var(--text-secondary); font-size: 0.85rem;">ID: ${t.id}</span>\n                                </div>\n                            `).join(""),i.classList.add("show")}catch(t){i.innerHTML='<div class="search-result-item">Error searching</div>',i.classList.add("show")}},300)}),i.addEventListener("click",t=>{d(t.target.closest(".search-result-item"))}),document.addEventListener("click",t=>{n.contains(t.target)||i.contains(t.target)||(i.classList.remove("show"),r=-1)})}function addTrackedPlayer(t,e){trackedPlayerIds.find(e=>e.id===t)||(trackedPlayerIds.push({id:t,name:e}),updateTrackedPlayersUI())}function removeTrackedPlayer(t){trackedPlayerIds=trackedPlayerIds.filter(e=>e.id!==t),updateTrackedPlayersUI()}function updateTrackedPlayersUI(){const t=document.getElementById("trackedPlayers"),e=document.getElementById("trackBtn");t.innerHTML=trackedPlayerIds.map(t=>`\n                <div class="player-chip">\n                    <span>${t.name}</span>\n                    <button class="player-chip-remove" onclick="removeTrackedPlayer(${t.id})">&times;</button>\n                </div>\n            `).join(""),e.disabled=0===trackedPlayerIds.length}async function loadTrackedStats(){if(0===trackedPlayerIds.length)return;const t=document.getElementById("trackerContent");t.innerHTML='<div class="loading"><div class="spinner"></div> Loading player stats...</div>';try{const e=trackedPlayerIds.map(t=>t.id).join(","),s=await _fetchWithAbort("trackedStats",`/api/players/stats?ids=${e}`),a=await s.json();if(0===a.players.length)return void(t.innerHTML='\n                        <div class="empty-state">\n                            <div class="empty-state-icon">&#128564;</div>\n                            <div class="empty-state-title">No Active Games</div>\n                            <p>Selected players don\'t have games in progress today</p>\n                        </div>\n                    ');t.innerHTML=`\n                    <div class="card" style="overflow-x: auto;">\n                        <table class="player-stats-table">\n                            <thead>\n                                <tr>\n                                    <th>Player</th>\n                                    <th>Team</th>\n                                    <th>MIN</th>\n                                    <th>PTS</th>\n                                    <th>3PT</th>\n                                    <th>REB</th>\n                                    <th>AST</th>\n                                    <th>BLK</th>\n                                    <th>STL</th>\n                                    <th>TO</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                ${a.players.map(t=>`\n                                    <tr>\n                                        <td><strong>${t.name}</strong></td>\n                                        <td>${t.team}</td>\n                                        <td>${t.minutes}</td>\n                                        <td class="${statClass("points",t.points)}">${t.points}</td>\n                                        <td>${t.threePointers}</td>\n                                        <td class="${statClass("rebounds",t.rebounds)}">${t.rebounds}</td>\n                                        <td class="${statClass("assists",t.assists)}">${t.assists}</td>\n                                        <td class="${statClass("blocks",t.blocks)}">${t.blocks}</td>\n                                        <td class="${statClass("steals",t.steals)}">${t.steals}</td>\n                                        <td>${t.turnovers}</td>\n                                    </tr>\n                                `).join("")}\n                            </tbody>\n                        </table>\n                    </div>\n                `}catch(e){t.innerHTML=`\n                    <div class="empty-state">\n                        <div class="empty-state-icon">&#9888;</div>\n                        <div class="empty-state-title">Error Loading Stats</div>\n                        <p>${e.message}</p>\n                    </div>\n                `}}async function toggleGameDetails(t,e){const s=document.getElementById(`details-${t}`);if("block"!==s.style.display){s.innerHTML='<div class="loading" style="padding: 20px;"><div class="spinner"></div> Loading player stats...</div>',s.style.display="block";try{const e=await fetch(`/api/games/${t}/players`),a=await e.json();s.innerHTML=a.teams.map(t=>{const e=t.players.filter(t=>"0:00"!==t.minutes&&"0"!==t.minutes&&0!==t.minutes);return`\n                    <div style="padding: 8px; border-top: 1px solid var(--border);">\n                        <h4 style="margin-bottom: 6px; color: var(--accent); font-size: 0.75rem;">${t.name} - ${t.score}</h4>\n                        <table class="boxscore-table" style="font-size: 0.72rem;">\n                            <thead>\n                                <tr>\n                                    <th style="text-align: left;">Player</th>\n                                    <th>MIN</th>\n                                    <th>PTS</th>\n                                    <th>REB</th>\n                                    <th>AST</th>\n                                    <th>FG</th>\n                                    <th>3PT</th>\n                                    <th>FT</th>\n                                    <th>STL</th>\n                                    <th>BLK</th>\n                                    <th>TO</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                ${e.map(t=>`\n                                    <tr>\n                                        <td style="text-align: left; white-space: nowrap;">${t.name}</td>\n                                        <td>${t.minutes}</td>\n                                        <td class="${statClass("points",t.points)}">${t.points}</td>\n                                        <td class="${statClass("rebounds",t.rebounds)}">${t.rebounds}</td>\n                                        <td class="${statClass("assists",t.assists)}">${t.assists}</td>\n                                        <td>${t.fg}</td>\n                                        <td>${t.threePt}</td>\n                                        <td>${t.ft}</td>\n                                        <td class="${statClass("steals",t.steals)}">${t.steals}</td>\n                                        <td class="${statClass("blocks",t.blocks)}">${t.blocks}</td>\n                                        <td>${t.turnovers}</td>\n                                    </tr>\n                                `).join("")}\n                            </tbody>\n                        </table>\n                    </div>`}).join("")}catch(t){s.innerHTML=`<div style="padding: 20px; color: var(--text-secondary);">Error loading player stats: ${t.message}</div>`}}else s.style.display="none"}async function loadStandings(){const t=document.getElementById("standingsContent");t.innerHTML='<div class="loading"><div class="spinner"></div> Loading standings...</div>';try{const e=await _fetchWithAbort("standings","/api/standings"),s=await e.json(),a=(t,e)=>`\n                    <div class="card" style="overflow-x: auto;">\n                        <h3 style="padding: 15px 20px; background: var(--bg-secondary); margin: 0;">${e} Conference</h3>\n                        <table class="boxscore-table">\n                            <thead>\n                                <tr>\n                                    <th>#</th>\n                                    <th style="text-align: left;">Team</th>\n                                    <th>W</th>\n                                    <th>L</th>\n                                    <th>PCT</th>\n                                    <th>GB</th>\n                                    <th>Streak</th>\n                                    <th>L10</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                ${t.map((t,e)=>`\n                                    <tr style="${e<6?"background: rgba(74, 222, 128, 0.05);":e<10?"background: rgba(255, 107, 53, 0.05);":""}">\n                                        <td style="text-align: center; font-weight: 600;">${t.rank}</td>\n                                        <td style="text-align: left; font-weight: 500;">${t.name}</td>\n                                        <td class="highlight">${t.wins}</td>\n                                        <td>${t.losses}</td>\n                                        <td>${(100*t.winPct).toFixed(1)}%</td>\n                                        <td>${t.gamesBack}</td>\n                                        <td>${t.streak}</td>\n                                        <td>${t.last10}</td>\n                                    </tr>\n                                `).join("")}\n                            </tbody>\n                        </table>\n                    </div>\n                `;t.innerHTML=a(s.east,"Eastern")+a(s.west,"Western")}catch(e){t.innerHTML=`\n                    <div class="empty-state">\n                        <div class="empty-state-icon">&#9888;</div>\n                        <div class="empty-state-title">Error Loading Standings</div>\n                        <p>${e.message}</p>\n                    </div>\n                `}}_leaderDateBtns.forEach(t=>{t.textContent=_dateLabel(parseInt(t.dataset.offset)),t.addEventListener("click",()=>{_leaderDateBtns.forEach(t=>t.classList.remove("active")),t.classList.add("active"),currentLeadersOffset=parseInt(t.dataset.offset),loadLeaders()})}),_loadDateLabels(),initPlayerSearch("playerSearch","searchResults",(t,e)=>{addTrackedPlayer(t,e)},"trackBtn");let injuriesData=null,injuriesView="list";function setInjuriesView(t){injuriesView=t,document.getElementById("injuriesListBtn").classList.toggle("active","list"===t),document.getElementById("injuriesGroupBtn").classList.toggle("active","grouped"===t),injuriesData&&renderInjuries()}function renderInjuries(){const t=document.getElementById("injuriesContent"),e=injuriesData;if("list"===injuriesView){const s=[];e.injuries.forEach(t=>{t.players.forEach(e=>{s.push({name:e.name,status:e.status,team:t.team})})});const a=Math.ceil(s.length/4),n=[s.slice(0,a),s.slice(a,2*a),s.slice(2*a,3*a),s.slice(3*a)],i=t=>{const e=t.status.toLowerCase();let s="GTD";e.includes("out for")||"suspension"===e?s="OUT":e.includes("expected")||e.includes("return")?s=t.status.match(_RETURN_DATE_RE)?.[0]||"TBD":"day-to-day"===e||"game time decision"===e?s="GTD":"out"===e&&(s="OUT");const a="OUT"===s?"#ef4444":"GTD"!==s?"#f59e0b":"#4ade80",n=t.team.toLowerCase(),i=_TEAM_CODES[n]||Object.entries(_TEAM_CODES).find(([t])=>n.includes(t))?.[1]||t.team.substring(0,3).toUpperCase();return`<div style="display: flex; justify-content: space-between; padding: 3px 6px; border-bottom: 1px solid var(--border); font-size: 10px;">\n                        <span style="flex: 1; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${t.name}</span>\n                        <span style="width: 30px; color: var(--text-secondary); text-align: center;">${i}</span>\n                        <span style="width: 45px; text-align: right; color: ${a}; font-weight: 600;">${s}</span>\n                    </div>`},l=t=>`\n                    <div class="card" style="padding: 0; overflow: hidden;">\n                        <div style="padding: 4px 6px; background: var(--bg-secondary); font-size: 9px; color: var(--text-secondary); display: flex; justify-content: space-between;">\n                            <span style="flex: 1;">Player</span>\n                            <span style="width: 30px; text-align: center;">Team</span>\n                            <span style="width: 45px; text-align: right;">Status</span>\n                        </div>\n                        ${t.map(i).join("")}\n                    </div>\n                `;t.innerHTML=`\n                    <p style="color: var(--text-secondary); margin-bottom: 10px; font-size: 0.75rem;">\n                        ${s.length} injured | GTD=Game Time Decision | OUT=Season | Date=Return\n                    </p>\n                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(min(250px, 100%), 1fr)); gap: 10px;">\n                        ${n.map(l).join("")}\n                    </div>\n                `}else t.innerHTML=`\n                    <p style="color: var(--text-secondary); margin-bottom: 20px; font-size: 0.9rem;">\n                        Last updated: ${e.lastUpdated} | Source: ${e.source}\n                    </p>\n                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(min(450px, 100%), 1fr)); gap: 20px;">\n                        ${e.injuries.map(t=>`\n                            <div class="card" style="overflow: hidden;">\n                                <div style="padding: 15px 20px; background: var(--bg-secondary); font-weight: 600; border-bottom: 1px solid var(--border);">\n                                    ${t.team}\n                                    <span style="color: var(--text-secondary); font-weight: normal; font-size: 0.85rem; margin-left: 10px;">${t.players.length} player${1!==t.players.length?"s":""}</span>\n                                </div>\n                                <table class="boxscore-table" style="font-size: 0.92rem;">\n                                    <thead>\n                                        <tr>\n                                            <th style="text-align: left;">Player</th>\n                                            <th>Updated</th>\n                                            <th>Injury</th>\n                                            <th>Status</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        ${t.players.map(t=>`\n                                            <tr>\n                                                <td style="text-align: left; font-weight: 500;">${t.name}</td>\n                                                <td style="color: var(--text-secondary); font-size: 0.8rem;">${t.updated}</td>\n                                                <td>${t.injury}</td>\n                                                <td style="color: ${t.status.toLowerCase().includes("out")||"suspension"===t.status.toLowerCase()?"#ef4444":t.status.toLowerCase().includes("day-to-day")||t.status.toLowerCase().includes("expected")?"#f59e0b":"var(--success)"}; font-weight: 500;">${t.status}</td>\n                                            </tr>\n                                        `).join("")}\n                                    </tbody>\n                                </table>\n                            </div>\n                        `).join("")}\n                    </div>\n                `}async function loadInjuries(){const t=document.getElementById("injuriesContent");t.innerHTML='<div class="loading"><div class="spinner"></div> Loading injury report...</div>';try{const e=await _fetchWithAbort("injuries","/api/injuries"),s=await e.json();if(!e.ok)throw new Error(s.detail||"Failed to load injuries");if(!s.injuries||0===s.injuries.length)return void(t.innerHTML='\n                        <div class="empty-state">\n                            <div class="empty-state-icon">&#128170;</div>\n                            <div class="empty-state-title">No Injuries Reported</div>\n                            <p>All players are healthy!</p>\n                        </div>\n                    ');injuriesData=s,renderInjuries()}catch(e){t.innerHTML=`\n                    <div class="empty-state">\n                        <div class="empty-state-icon">&#9888;</div>\n                        <div class="empty-state-title">Error Loading Injuries</div>\n                        <p>${e.message}</p>\n                    </div>\n                `}}let lastNSelectedPlayer=null,lastNGamesCount=5;const _lastNDateBtns=Array.from(document.querySelectorAll("#lastngames .date-btn[data-n]"));async function loadLastNGames(){if(!lastNSelectedPlayer)return;const t=document.getElementById("lastNContent");t.innerHTML='<div class="loading"><div class="spinner"></div> Loading game log...</div>';try{const[e,s]=await Promise.all([_fetchWithAbort("lastNGames",`/api/players/${lastNSelectedPlayer.id}/last-n-games?n=${lastNGamesCount}`),_fetchWithAbort("lastNSeasonAvg",`/api/players/${lastNSelectedPlayer.id}/season-avg`)]),a=await e.json(),n=s.ok?await s.json():null;if(!a.games||0===a.games.length)return void(t.innerHTML=`\n                        <div class="empty-state">\n                            <div class="empty-state-icon">&#128564;</div>\n                            <div class="empty-state-title">No Games Found</div>\n                            <p>No recent game data available for ${a.playerName}</p>\n                        </div>\n                    `);t.innerHTML=`\n                    <div style="margin-bottom: 8px; color: var(--text-secondary); font-size: 0.85rem;">\n                        ${a.games.filter(t=>!t.dnp).length} games played of ${a.games.length} shown\n                    </div>\n                    <div class="card" style="overflow-x: auto;">\n                        <table class="player-stats-table">\n                            <thead>\n                                <tr>\n                                    <th style="text-align: left;">Matchup</th>\n                                    <th>MIN</th>\n                                    <th>PTS</th>\n                                    <th>FG</th>\n                                    <th>3P</th>\n                                    <th>FT</th>\n                                    <th>REB</th>\n                                    <th>AST</th>\n                                    <th>BLK</th>\n                                    <th>STL</th>\n                                    <th>PF</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                ${a.games.map(t=>t.dnp?`\n                                    <tr style="opacity: 0.5;">\n                                        <td style="text-align: left;">${t.matchup}</td>\n                                        <td colspan="10" style="text-align: center; color: var(--text-secondary); font-style: italic;">DNP</td>\n                                    </tr>\n                                `:`\n                                    <tr>\n                                        <td style="text-align: left; white-space: nowrap;">${t.matchup}</td>\n                                        <td>${t.minutes}</td>\n                                        <td class="${statClass("points",t.points)}">${t.points}</td>\n                                        <td>${t.fg}</td>\n                                        <td>${t.threePointers}</td>\n                                        <td>${t.ft}</td>\n                                        <td class="${statClass("rebounds",t.rebounds)}">${t.rebounds}</td>\n                                        <td class="${statClass("assists",t.assists)}">${t.assists}</td>\n                                        <td class="${statClass("blocks",t.blocks)}">${t.blocks}</td>\n                                        <td class="${statClass("steals",t.steals)}">${t.steals}</td>\n                                        <td>${t.fouls}</td>\n                                    </tr>\n                                `).join("")}\n                                ${n?`\n                                <tr style="border-top: 2px solid var(--accent); background: var(--bg-secondary); font-weight: 600;">\n                                    <td style="text-align: left; white-space: nowrap;">\n                                        <span style="color: var(--accent); font-size: 0.75rem;">${n.season}</span>\n                                        <span style="color: var(--text-secondary); font-size: 0.7rem; margin-left: 4px;">(${n.gp} games)</span>\n                                    </td>\n                                    <td style="color: var(--text-secondary);">${n.minutes}</td>\n                                    <td class="highlight">${n.points}</td>\n                                    <td style="color: var(--text-secondary); font-size: 0.8rem;">${n.fgPct.toFixed(2)}%</td>\n                                    <td style="color: var(--text-secondary); font-size: 0.8rem;">${n.fg3Pct.toFixed(2)}%</td>\n                                    <td style="color: var(--text-secondary); font-size: 0.8rem;">${n.ftPct.toFixed(2)}%</td>\n                                    <td>${n.rebounds}</td>\n                                    <td>${n.assists}</td>\n                                    <td>${n.blocks}</td>\n                                    <td>${n.steals}</td>\n                                    <td style="color: var(--text-secondary);">${n.fouls}</td>\n                                </tr>`:""}\n                            </tbody>\n                        </table>\n                    </div>\n                `}catch(e){t.innerHTML=`\n                    <div class="empty-state">\n                        <div class="empty-state-icon">&#9888;</div>\n                        <div class="empty-state-title">Error Loading Stats</div>\n                        <p>${e.message}</p>\n                    </div>\n                `}}_lastNDateBtns.forEach(t=>{t.addEventListener("click",()=>{_lastNDateBtns.forEach(t=>t.classList.remove("active")),t.classList.add("active"),lastNGamesCount=parseInt(t.dataset.n)})}),initPlayerSearch("lastNSearch","lastNSearchResults",(t,e)=>{lastNSelectedPlayer={id:t,name:e},document.getElementById("lastNPlayerChip").innerHTML=`\n                <div class="player-chip">\n                    <span>${e}</span>\n                    <button class="player-chip-remove" onclick="lastNSelectedPlayer=null; document.getElementById('lastNPlayerChip').innerHTML=''; document.getElementById('lastNBtn').disabled=true;">&times;</button>\n                </div>\n            `,document.getElementById("lastNBtn").disabled=!1},"lastNBtn");let playoffsData=null,activeConference="east";async function loadPlayoffs(){const t=document.getElementById("playoffsContent");t.innerHTML='<div class="loading"><div class="spinner"></div> Loading bracket...</div>';try{const t=await _fetchWithAbort("playoffs","/api/playoffs");playoffsData=await t.json(),showConference(activeConference)}catch(e){t.innerHTML=`<div class="empty-state"><div class="empty-state-icon">&#9888;</div><div class="empty-state-title">Error Loading Bracket</div><p>${e.message}</p></div>`}}function showConference(t){if(!playoffsData)return;activeConference=t,document.getElementById("playoffEastBtn").classList.toggle("active","east"===t),document.getElementById("playoffWestBtn").classList.toggle("active","west"===t);const e=document.getElementById("playoffsContent");e.innerHTML="";drawBracket("east"===t?playoffsData.east:playoffsData.west,"east"===t?"Eastern Conference":"Western Conference",e)}function drawBracket(t,e,s){const a=220,n=38,i=20,l=16,r=[t[0],t[7],t[3],t[4],t[2],t[5],t[1],t[6]],o=t.slice(6,10),d=788,c=1.44,m=window.devicePixelRatio||1,p=document.createElement("canvas");p.width=1134.72*m,p.height=673.92*m,p.style.cssText="max-width:100%; display:block; margin-bottom:24px; width:1134.72px; height:673.92px;";const v=p.getContext("2d");v.scale(c*m,c*m);const h="#1a1a24",y="#2a2a3a",f="#ffffff",g="#a0a0b0",u="#ff6b35",b="#f59e0b",T="#3a3a4a";function $(t,e,s,i){v.fillStyle=i?"#22222e":h,x(v,t,e,a,n,5),v.fill(),v.strokeStyle=i?u:y,v.lineWidth=i?1.5:1,x(v,t,e,a,n,5),v.stroke();const l=s.rank<=6?"#4ade80":b;v.fillStyle=l+"22",x(v,t+6,e+8,22,22,3),v.fill(),v.font="bold 10px Inter, sans-serif",v.fillStyle=l,v.textAlign="center",v.fillText(s.rank,t+17,e+23),v.font="500 11px Inter, sans-serif",v.fillStyle=f,v.textAlign="left";let r=s.name;for(v.font="11px Inter, sans-serif";v.measureText(r).width>140&&r.length>4;)r=r.slice(0,-1);r!==s.name&&(r+="…"),v.fillText(r,t+34,e+23),v.font="10px Inter, sans-serif",v.fillStyle=g,v.textAlign="right",v.fillText(`${s.wins}-${s.losses}`,t+a-6,e+23)}function x(t,e,s,a,n,i){t.beginPath(),t.moveTo(e+i,s),t.lineTo(e+a-i,s),t.quadraticCurveTo(e+a,s,e+a,s+i),t.lineTo(e+a,s+n-i),t.quadraticCurveTo(e+a,s+n,e+a-i,s+n),t.lineTo(e+i,s+n),t.quadraticCurveTo(e,s+n,e,s+n-i),t.lineTo(e,s+i),t.quadraticCurveTo(e,s,e+i,s),t.closePath()}function L(t){return i+46*t}v.fillStyle="#12121a",v.fillRect(0,0,d,468);for(let t=0;t<8;t++){const e=r[t];if(!e)continue;const s=L(t);$(l,s,e,!1)}const w=284,A=552;v.strokeStyle=T,v.lineWidth=1.5;const k=[];[[0,1],[2,3],[4,5],[6,7]].forEach(([t,e],s)=>{const a=L(t)+19,n=L(e)+19,i=260,l=(a+n)/2;v.beginPath(),v.moveTo(236,a),v.lineTo(i,a),v.stroke(),v.beginPath(),v.moveTo(236,n),v.lineTo(i,n),v.stroke(),v.beginPath(),v.moveTo(i,a),v.lineTo(i,n),v.stroke(),v.beginPath(),v.moveTo(i,l),v.lineTo(w,l),v.stroke(),k.push(l-19)}),k.forEach((t,e)=>{v.fillStyle=h,x(v,w,t,a,n,5),v.fill(),v.strokeStyle=y,v.lineWidth=1,x(v,w,t,a,n,5),v.stroke(),v.font="10px Inter, sans-serif",v.fillStyle=g,v.textAlign="center",v.fillText("Semifinal",394,t+19+4)});const S=[];[[0,1],[2,3]].forEach(([t,e],s)=>{const a=k[t]+19,n=k[e]+19,i=528,l=(a+n)/2;v.strokeStyle=T,v.lineWidth=1.5,v.beginPath(),v.moveTo(504,a),v.lineTo(i,a),v.stroke(),v.beginPath(),v.moveTo(504,n),v.lineTo(i,n),v.stroke(),v.beginPath(),v.moveTo(i,a),v.lineTo(i,n),v.stroke(),v.beginPath(),v.moveTo(i,l),v.lineTo(A,l),v.stroke(),S.push(l-19)}),S.forEach(t=>{v.fillStyle=h,x(v,A,t,a,n,5),v.fill(),v.strokeStyle=u,v.lineWidth=1,x(v,A,t,a,n,5),v.stroke(),v.font="bold 10px Inter, sans-serif",v.fillStyle=u,v.textAlign="center",v.fillText("Conf. Finals",662,t+19+4)}),v.font="bold 10px Inter, sans-serif",v.fillStyle=g,v.textAlign="center",v.fillText("FIRST ROUND",126,8),v.fillText("SEMIFINALS",394,8),v.fillText("CONF. FINALS",662,8);v.font="bold 10px Inter, sans-serif",v.fillStyle=b,v.textAlign="left",v.fillText("PLAY-IN TOURNAMENT (Seeds 7-10)",l,414);const E=183;o.forEach((t,e)=>{const s=l+191*e,a=422;v.fillStyle=h,x(v,s,a,E,n,5),v.fill(),v.strokeStyle=b+"66",v.lineWidth=1,x(v,s,a,E,n,5),v.stroke(),v.font="bold 10px Inter, sans-serif",v.fillStyle=b,v.textAlign="center",v.fillText(t.rank,s+14,445);let i=t.name;v.font="10px Inter, sans-serif";for(;v.measureText(i).width>139&&i.length>4;)i=i.slice(0,-1);i!==t.name&&(i+="…"),v.fillStyle=f,v.textAlign="left",v.fillText(i,s+24,445),v.fillStyle=g,v.textAlign="right",v.fillText(`${t.wins}-${t.losses}`,s+E-5,445)}),s.appendChild(p)}"serviceWorker"in navigator&&navigator.serviceWorker.register("/static/sw.js"),loadScoreboard();</script>
    <script defer src="/t/a.js" data-website-id="b68bfbcf-f86b-4e65-9257-bda61e465ddb"></script>
</body>
</html>
